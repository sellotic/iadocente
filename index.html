import React, { useState } from 'react';
import { BookOpen, Target, Puzzle, Users, Film, Award, Cpu, Menu, X, User, Info } from 'lucide-react';

// --- URL del Logo y Enlace ---
const logoUrl = "https://upla.cl/facultad/cienciasnaturalesyexactas/wp-content/uploads/2022/09/05-fac-cs-naturales.png";
const logoLink = "https://upla.cl/facultad/cienciasnaturalesyexactas/";

// --- Datos del Curso (Actualizados) ---
const courseData = {
  descripcion: {
    icon: Info,
    title: "Descripción del Curso",
    details: [
        "Curso: Inteligencia Artificial Generativa para la Gestión Docente",
        "Duración total: 20 horas (asincrónicas, sincrónicas optativas y de trabajo autónomo)",
        "Destinatarios: Docentes de cualquier disciplina y nivel educativo."
    ],
    objectiveTitle: "Objetivo General",
    objectiveContent: "Desarrollar habilidades y conocimientos para integrar eficazmente herramientas de Inteligencia Artificial en la gestión docente, optimizando la creación de recursos, automatización de tareas, acompañamiento al estudiantado y procesos de evaluación."
  },
  bloque1: {
    icon: BookOpen,
    title: "1: Aprendizaje adaptativo",
    content: "Descubre cómo utilizar la IA para crear rutas de aprendizaje personalizadas que se ajustan al ritmo y estilo de cada estudiante. Se explorarán herramientas para generar material didáctico que responda a las necesidades individuales, fomentando un aprendizaje más profundo y significativo."
  },
  bloque2: {
    icon: Cpu,
    title: "2: Automatización de tareas",
    content: "Aprende a optimizar tu tiempo utilizando la IA para automatizar tareas administrativas y repetitivas. Desde la planificación de clases y la creación de presentaciones, hasta la gestión de comunicaciones y la organización de recursos, este módulo te enseñará a delegar trabajo a la tecnología para centrarte en lo que más importa: la enseñanza."
  },
  bloque3: {
    icon: Award,
    title: "3: Evaluación de proceso y resultado",
    content: "Explora cómo la IA puede transformar los procesos de evaluación. Se abordará la creación de instrumentos de evaluación formativa y sumativa, la generación de rúbricas detalladas y la entrega de retroalimentación automatizada y personalizada, permitiendo un seguimiento más eficiente y detallado del progreso del estudiantado."
  },
  bloque4: {
    icon: Puzzle,
    title: "4: Juegos interactivos",
    content: "Sumérgete en el mundo de la gamificación y aprende a diseñar experiencias de aprendizaje lúdicas. Este módulo te enseñará a utilizar herramientas de IA para crear juegos interactivos que capturen la atención de los estudiantes y refuercen los contenidos curriculares de manera entretenida y efectiva."
  },
  evaluacion: {
    icon: Award,
    title: "Evaluación Final Integradora",
    content: "Diseño de una propuesta de integración de IA en su práctica docente, que debe incluir:",
    details: [
      "Una actividad de aprendizaje adaptativo diseñada con IA.",
      "Un ejemplo de tarea administrativa automatizada.",
      "Un instrumento de evaluación innovador generado con IA.",
      "Diseño de juego interactivo."
    ],
    summary: "La presentación de esta propuesta demostrará la aplicación práctica de las herramientas y estrategias aprendidas en el curso."
  },
  relatora: {
    icon: User,
    title: "Docente a cargo",
    content: "",
    name: "Roxana Rebolledo Font de la Vall",
    details: [
      "Profesora de Inglés y Licenciada en Educación",
      "Magíster en Comunicación Educativa y NTIC",
      "Doctora (c) en Tecnología Educativa",
      "Certificada en Moodle (MEC)"
    ],
    website: "roxanarebolledo.com",
    experienceUrl: "https://roxanarebolledo.com/experiencia",
    videoUrl: "https://www.youtube.com/embed/TaLu30YkTTg?si=HB-avSZ1-1GT2tkx"
  }
};

// --- Componente de Navegación (Sidebar) ---
const Sidebar = ({ activeSection, setActiveSection, setSidebarOpen }) => {
  const navItems = [
    { id: 'descripcion', label: 'Descripción del Curso' },
    { id: 'bloque1', label: '1: Aprendizaje Adaptativo' },
    { id: 'bloque2', label: '2: Automatización de Tareas' },
    { id: 'bloque3', label: '3: Evaluación de Proceso' },
    { id: 'bloque4', label: '4: Juegos Interactivos' },
    { id: 'evaluacion', label: 'Evaluación Final' },
    { id: 'relatora', label: 'Docente a cargo' },
  ];

  return (
    <div className="w-full h-full bg-white text-gray-800 p-5 flex flex-col border-r border-gray-200">
      <div className="flex justify-between items-center mb-6 pb-4 border-b">
        <a href={logoLink} target="_blank" rel="noopener noreferrer">
          <img src={logoUrl} alt="Logo Institucional" className="h-12" />
        </a>
        <button onClick={() => setSidebarOpen(false)} className="lg:hidden text-gray-500 hover:text-gray-800">
            <X size={24} />
        </button>
      </div>
      <nav className="flex-grow">
        <ul>
          {navItems.map(item => {
            const Icon = courseData[item.id]?.icon;
            if (!Icon) return null;
            const isActive = activeSection === item.id;
            return (
              <li key={item.id} className="mb-2">
                <a
                  href="#"
                  onClick={(e) => {
                    e.preventDefault();
                    setActiveSection(item.id);
                    setSidebarOpen(false);
                  }}
                  className={`flex items-center p-3 rounded-lg transition-all duration-300 transform hover:scale-105 ${
                    isActive
                      ? 'bg-sky-500 text-white shadow-lg'
                      : 'hover:bg-sky-100 text-gray-700'
                  }`}
                >
                  <Icon size={20} className="mr-3 flex-shrink-0" />
                  <span className="font-medium">{item.label}</span>
                </a>
              </li>
            );
          })}
        </ul>
      </nav>
      <div className="mt-4">
        <a 
          href="https://forms.gle/cGMrbJnEtpi1BGD97"
          target="_blank"
          rel="noopener noreferrer"
          className="block bg-sky-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-sky-700 transition-all duration-300 shadow-lg text-center transform hover:scale-105"
        >
          Inscripciones
        </a>
      </div>
      <div className="mt-auto text-center text-xs text-gray-400 pt-4">
        <p>Capacitación Docente 2025</p>
      </div>
    </div>
  );
};

// --- Componente de Contenido Principal ---
const Content = ({ sectionId }) => {
  const section = courseData[sectionId];
  if (!section) return null;

  const { icon: Icon, title, content, name, details, summary, website, videoUrl, experienceUrl, objectiveTitle, objectiveContent } = section;

  return (
    <div className="p-6 sm:p-8 lg:p-10 w-full overflow-y-auto bg-sky-50">
      <div className="max-w-4xl mx-auto">
        <div className="flex items-center text-gray-800 mb-6">
          <div className="p-3 bg-white rounded-full shadow-md mr-4">
            <Icon size={32} className="text-sky-600" />
          </div>
          <h1 className="text-3xl lg:text-4xl font-bold tracking-tight">{title}</h1>
        </div>
        
        <div className="bg-white p-8 rounded-xl shadow-lg border border-gray-200">
          {content && <p className="text-lg text-gray-700 leading-relaxed mb-6">{content}</p>}

          {name && <h2 className="text-2xl font-semibold text-gray-800 mb-4">{name}</h2>}

          {objectiveTitle && objectiveContent && (
            <div className="mb-6">
              <h3 className="text-2xl font-semibold text-gray-800 mb-4 flex items-center">
                <Target className="mr-3 text-sky-600" />
                {objectiveTitle}
              </h3>
              <p className="text-lg text-gray-700 leading-relaxed">{objectiveContent}</p>
            </div>
          )}

          {details && (
            <div className={`${objectiveTitle ? 'mt-6 pt-6 border-t border-gray-200' : 'mb-6'}`}>
              <ul className="space-y-3">
                {details.map((detail, index) => (
                  <li key={index} className="flex items-start">
                    <div className="flex-shrink-0 h-6 w-6 rounded-full bg-sky-100 text-sky-700 flex items-center justify-center mr-3 mt-1">
                        <span className="font-bold text-sm">✓</span>
                    </div>
                    <span className="text-gray-800">{detail}</span>
                  </li>
                ))}
              </ul>
            </div>
          )}

          {summary && (
             <div className="mt-6 p-4 bg-sky-50 border-l-4 border-sky-500 rounded-r-lg">
                <p className="text-sky-900 font-medium">{summary}</p>
             </div>
          )}

          {(website || experienceUrl) && (
            <div className="mt-6 flex flex-wrap gap-4">
              {website && (
                <a href={`https://${website}`} target="_blank" rel="noopener noreferrer" className="inline-block bg-sky-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-sky-700 transition-colors shadow-md">
                  Visitar Sitio Web
                </a>
              )}
              {experienceUrl && (
                <a href={experienceUrl} target="_blank" rel="noopener noreferrer" className="inline-block bg-gray-700 text-white font-bold py-3 px-6 rounded-lg hover:bg-gray-800 transition-colors shadow-md">
                  Experiencia en IA
                </a>
              )}
            </div>
          )}

          {videoUrl && (
            <div className="mt-8">
                <h3 className="text-xl font-semibold text-gray-800 mb-4 border-b-2 border-sky-200 pb-2">Video de Presentación</h3>
                <div className="relative w-full" style={{ paddingTop: '56.25%' }}>
                    <iframe
                        className="absolute top-0 left-0 w-full h-full rounded-lg shadow-lg"
                        src={videoUrl}
                        title="YouTube video player"
                        frameBorder="0"
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                        referrerPolicy="strict-origin-when-cross-origin"
                        allowFullScreen
                    ></iframe>
                </div>
            </div>
          )}
        </div>
      </div>
    </div>
  );
};


// --- Componente Principal de la Aplicación ---
export default function App() {
  const [activeSection, setActiveSection] = useState('descripcion');
  const [sidebarOpen, setSidebarOpen] = useState(false);
  const courseTitle = courseData.descripcion.details[0].replace('Curso: ', '');


  if (!courseData[activeSection]) {
      setActiveSection('descripcion');
  }

  return (
    <div className="flex h-screen bg-gray-100 font-sans">
      {/* Overlay for mobile */}
      {sidebarOpen && (
        <div 
            className="fixed inset-0 bg-black bg-opacity-50 z-20 lg:hidden"
            onClick={() => setSidebarOpen(false)}
        ></div>
      )}

      {/* Sidebar */}
      <aside className={`fixed lg:relative inset-y-0 left-0 transform ${sidebarOpen ? 'translate-x-0' : '-translate-x-full'} lg:translate-x-0 transition-transform duration-300 ease-in-out w-72 h-full z-30 shadow-2xl lg:shadow-none`}>
        <Sidebar activeSection={activeSection} setActiveSection={setActiveSection} setSidebarOpen={setSidebarOpen} />
      </aside>

      {/* Main Content */}
      <main className="flex-1 flex flex-col h-screen">
         {/* Header for mobile with menu button */}
        <header className="lg:hidden bg-white text-gray-800 p-4 flex items-center justify-between shadow-md border-b border-gray-200 z-10">
            <button onClick={() => setSidebarOpen(true)} className="mr-4">
                <Menu size={24} />
            </button>
            <a href={logoLink} target="_blank" rel="noopener noreferrer">
              <img src={logoUrl} alt="Logo Institucional" className="h-8" />
            </a>
        </header>

        {/* Main Header with Title */}
        <div className="w-full bg-gradient-to-r from-sky-400 to-sky-600 p-4 shadow-lg border-b border-sky-700 z-10">
            <h1 className="text-2xl md:text-4xl font-bold text-white text-center tracking-wide">{courseTitle}</h1>
        </div>

        <div className="flex-1 overflow-y-auto">
            <Content sectionId={activeSection} />
        </div>
      </main>
    </div>
  );
}
